---
import "selo-components/common.css"; // has to be above site-specific css

import "@/styles/global.css";

import { Layout } from "selo-components";
import PageNav from "@/components/PageNav.astro";
import { getLang, posts, prevnexts } from "@/utils/content";
import { type CollectionEntry, render } from "astro:content";

export const getStaticPaths = async () =>
  posts.map((post) => ({
    params: { slug: post.id },
    props: post,
  }));

const rtl = ["he", "ar"];

const post: CollectionEntry<"blog"> = Astro.props;
const { Content } = await render(post);
const lang = getLang(post);
const prevnext = post.filePath!.includes("index.md")
  ? undefined
  : prevnexts[lang][post.id];
---

<Layout
  useNavbar
  title={post.data.title}
  description={post.data.description}
  goatcounter="wasona-com.goatcounter.com"
  github="https://github.com/wasona/wasona"
  dir={rtl.includes(lang) ? "rtl" : "ltr"}
>
  <link
    href="https://fonts.googleapis.com/css2?family=Noto+Sans+Hebrew:wght@100..900&display=swap"
    rel="stylesheet"
    slot="head"
  />
  <PageNav prevnext={prevnext} current={post.id} slot="pagenav" />
  <Content />
</Layout>
